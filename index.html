<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denver Racing Social - Twitch</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 50%, #cbd5e1 100%);
            min-height: 100vh;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
        }
        
        .glass-effect:hover {
            background: rgba(255, 255, 255, 0.9);
        }
        
        .button-primary {
            background: linear-gradient(135deg, #f97316 0%, #dc2626 100%);
            color: white;
            border: none;
            transition: all 0.3s ease;
        }
        
        .button-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .button-secondary {
            background: rgba(156, 163, 175, 0.8);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border: 1px solid rgba(209, 213, 219, 0.5);
            color: #374151;
            transition: all 0.3s ease;
        }
        
        .button-secondary:hover {
            background: rgba(209, 213, 219, 0.8);
            transform: scale(1.05);
            border-color: rgba(156, 163, 175, 0.5);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .tab-button {
            transition: all 0.3s ease;
        }
        
        .tab-button.active {
            background: rgba(59, 130, 246, 0.1);
            border-color: #3b82f6;
            color: #1d4ed8;
        }
        
        .tab-button:hover {
            background: rgba(156, 163, 175, 0.1);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
    </style>
</head>
<body class="gradient-bg">
    <div class="min-h-screen">
        <!-- Header -->
        <div class="px-5 pt-8">
            <div class="max-w-4xl mx-auto glass-effect rounded-[2rem] border border-gray-200/50 shadow-2xl p-8 transition-all duration-500">
                <div class="flex flex-col md:flex-row gap-4 items-center justify-center">
                    <a
                        href="https://www.denverracingsocial.com"
                        target="_blank"
                        class="button-secondary px-8 py-3 rounded-full font-medium text-sm hover:scale-105 hover:shadow-lg"
                    >
                        ‚Üê Back to DRS Website
                    </a>
                    
                    <a
                        href="https://www.denverracingsocial.com/mru"
                        target="_blank"
                        class="button-primary px-8 py-3 rounded-full font-semibold text-sm pulse-animation hover:scale-105 hover:shadow-lg"
                    >
                        üèÅ Sign Up - Mobile Racing Unit
                    </a>
                    
                    <a
                        href="https://www.denverracingsocial.com/mrutoday"
                        target="_blank"
                        class="button-primary px-8 py-3 rounded-full font-semibold text-sm hover:scale-105 hover:shadow-lg"
                    >
                        üìä Position & Leaderboard
                    </a>
                </div>
                <p class="text-center text-xs text-gray-600 mt-4 font-light">
                    üì± Scanned our QR code? Click "Sign Up" above to join the racing queue!
                </p>
            </div>
        </div>

        <!-- Main Content -->
        <div class="px-5 py-8">
            <div class="max-w-4xl mx-auto glass-effect rounded-[2rem] border border-gray-200/50 shadow-2xl overflow-hidden transition-all duration-500">
                <!-- Tab Navigation -->
                <div class="flex border-b border-gray-200/50 bg-white/50">
                    <button 
                        class="tab-button flex-1 px-6 py-4 text-xs font-medium border-b-2 border-transparent active"
                        onclick="showTab('centennial')"
                        id="centennial-tab"
                    >
                        üèéÔ∏è Centennial
                    </button>
                    <button 
                        class="tab-button flex-1 px-6 py-4 text-xs font-medium border-b-2 border-transparent"
                        onclick="showTab('lakewood')"
                        id="lakewood-tab"
                    >
                        üèÅ Lakewood
                    </button>
                </div>

                <!-- Tab Content -->
                <div class="p-8">
                    <!-- Centennial Tab -->
                    <div id="centennial-content" class="tab-content">
                        <div class="text-center mb-6">
                            <h1 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">
                                Denver Racing Social
                            </h1>
                            <p class="text-sm text-gray-600 font-light">
                                Live from Centennial - Mobile Racing Unit
                            </p>
                        </div>

                        <div class="aspect-video bg-black rounded-3xl overflow-hidden shadow-2xl mb-6">
                            <div id="centennial-player" class="w-full h-full flex items-center justify-center">
                                <div class="text-white text-center">
                                    <div class="text-4xl mb-4">üì∫</div>
                                    <p class="text-lg font-medium">Checking for live stream...</p>
                                    <p class="text-sm opacity-75 mt-2">We'll automatically show the stream when live</p>
                                </div>
                            </div>
                        </div>

                        <div class="text-center">
                            <p class="text-xs text-gray-500 font-light">
                                Stream automatically detects when we're live at Centennial
                            </p>
                        </div>
                    </div>

                    <!-- Lakewood Tab -->
                    <div id="lakewood-content" class="tab-content hidden">
                        <div class="text-center mb-6">
                            <h1 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">
                                Denver Racing Social
                            </h1>
                            <p class="text-sm text-gray-600 font-light">
                                Live from Lakewood - Mobile Racing Unit
                            </p>
                        </div>

                        <div class="aspect-video bg-black rounded-3xl overflow-hidden shadow-2xl mb-6">
                            <div id="lakewood-player" class="w-full h-full flex items-center justify-center">
                                <div class="text-white text-center">
                                    <div class="text-4xl mb-4">üì∫</div>
                                    <p class="text-lg font-medium">Checking for live stream...</p>
                                    <p class="text-sm opacity-75 mt-2">We'll automatically show the stream when live</p>
                                </div>
                            </div>
                        </div>

                        <div class="text-center">
                            <p class="text-xs text-gray-500 font-light">
                                Stream automatically detects when we're live at Lakewood
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tab contents
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.add('hidden'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab-button');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName + '-content').classList.remove('hidden');
            
            // Add active class to selected tab
            document.getElementById(tabName + '-tab').classList.add('active');
        }

        // Twitch API integration
        const CLIENT_ID = 'gp762nuuoqcoxypju8c569th9wz7q5';
        const CENTENNIAL_CHANNEL = 'denverracingsocial';
        const LAKEWOOD_CHANNEL = 'denverracingsociallakewood';

        async function checkStreamStatus(channel, playerId) {
            try {
                const response = await fetch(`https://api.twitch.tv/helix/streams?user_login=${channel}`, {
                    headers: {
                        'Client-ID': CLIENT_ID,
                        'Authorization': 'Bearer ' // Note: This would need a valid token in production
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    const player = document.getElementById(playerId);
                    
                    if (data.data && data.data.length > 0) {
                        // Stream is live
                        player.innerHTML = `
                            <iframe 
                                src="https://player.twitch.tv/?channel=${channel}&parent=${window.location.hostname}&autoplay=true&muted=false"
                                height="100%" 
                                width="100%" 
                                allowfullscreen="true">
                            </iframe>
                        `;
                    } else {
                        // Stream is offline
                        player.innerHTML = `
                            <div class="text-white text-center">
                                <div class="text-4xl mb-4">üí§</div>
                                <p class="text-lg font-medium">Stream Offline</p>
                                <p class="text-sm opacity-75 mt-2">We'll be back soon with more racing action!</p>
                            </div>
                        `;
                    }
                }
            } catch (error) {
                console.log('Stream check failed, showing fallback');
                const player = document.getElementById(playerId);
                player.innerHTML = `
                    <iframe 
                        src="https://player.twitch.tv/?channel=${channel}&parent=${window.location.hostname}&autoplay=true&muted=false"
                        height="100%" 
                        width="100%" 
                        allowfullscreen="true">
                    </iframe>
                `;
            }
        }

        // Initialize streams
        function initializeStreams() {
            checkStreamStatus(CENTENNIAL_CHANNEL, 'centennial-player');
            checkStreamStatus(LAKEWOOD_CHANNEL, 'lakewood-player');
        }

        // Check streams on load and periodically
        document.addEventListener('DOMContentLoaded', function() {
            initializeStreams();
            // Check every 30 seconds
            setInterval(initializeStreams, 30000);
        });
    </script>
</body>
</html>

}

